{"title":"JavaScript获取URL参数","date":"2019-07-17T05:53:00.000Z","date_formatted":{"ll":"Jul 17, 2019","L":"07/17/2019","MM-DD":"07-17"},"link":"Learning/c23845560169","tags":["JavaScript"],"categories":["Learning"],"updated":"2023-11-14T12:07:06.466Z","content":"<h2 id=\"获取单个参数\">获取单个参数<a title=\"#获取单个参数\" href=\"#获取单个参数\"></a></h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据键获取url单个参数值</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span>  String name 键</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> String      </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getUrlParam</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//建立正则匹配规则</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> reg = <span class=\"keyword\">new</span> <span class=\"title class_\">RegExp</span>(<span class=\"string\">&quot;(^|&amp;)&quot;</span> + name + <span class=\"string\">&quot;=([^&amp;]*)(&amp;|$)&quot;</span>);</span><br><span class=\"line\">  <span class=\"comment\">//从？开始匹配</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> r = <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">search</span>.<span class=\"title function_\">substr</span>(<span class=\"number\">1</span>).<span class=\"title function_\">match</span>(reg);</span><br><span class=\"line\">  <span class=\"comment\">//解码返回</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (r != <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"built_in\">unescape</span>(r[<span class=\"number\">2</span>]); <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取全部参数\">获取全部参数<a title=\"#获取全部参数\" href=\"#获取全部参数\"></a></h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 获取当前页Url所有参数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> <span class=\"variable\">Object</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getUrlParams</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\"> <span class=\"comment\">//取得查询字符串并去掉开头的问号</span></span><br><span class=\"line\"> <span class=\"keyword\">let</span> qs = (location.<span class=\"property\">search</span>.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span> ? location.<span class=\"property\">search</span>.<span class=\"title function_\">substring</span>(<span class=\"number\">1</span>) : <span class=\"string\">&quot;&quot;</span>),</span><br><span class=\"line\"> <span class=\"comment\">//保存数据的对象</span></span><br><span class=\"line\"> args = &#123;&#125;,</span><br><span class=\"line\"> <span class=\"comment\">//取得每一项</span></span><br><span class=\"line\"> items = qs.<span class=\"property\">length</span> ? qs.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&amp;&quot;</span>) : [],</span><br><span class=\"line\"> item = <span class=\"literal\">null</span>,name = <span class=\"literal\">null</span>,value = <span class=\"literal\">null</span>,</span><br><span class=\"line\"> len = items.<span class=\"property\">length</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">//逐个将每一项添加到 args 对象中</span></span><br><span class=\"line\"> <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i=<span class=\"number\">0</span>; i &lt; len; i++)&#123;</span><br><span class=\"line\">   item = items[i].<span class=\"title function_\">split</span>(<span class=\"string\">&quot;=&quot;</span>);</span><br><span class=\"line\">   name = <span class=\"built_in\">decodeURIComponent</span>(item[<span class=\"number\">0</span>]);</span><br><span class=\"line\">   value = <span class=\"built_in\">decodeURIComponent</span>(item[<span class=\"number\">1</span>]);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (name.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">     args[name] = value;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> args;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","prev":{"title":"JavaScript-事件","link":"Learning/1444d05a63dc"},"next":{"title":"JavaScript-对象创建","link":"Learning/308102780ef2"},"plink":"https://blog.jschef.com/Learning/c23845560169/","toc":[{"id":"获取单个参数","title":"获取单个参数","index":"1"},{"id":"获取全部参数","title":"获取全部参数","index":"2"}],"reward":true,"copyright":{"author":"Chef Wu","link":"<a href=\"https://blog.jschef.com/Learning/c23845560169/\" title=\"JavaScript获取URL参数\">https://blog.jschef.com/Learning/c23845560169/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"July 17, 2019"}}