{"title":"Ubuntu 16.04搭建lnmp环境","date":"2019-08-12T09:00:00.000Z","date_formatted":{"ll":"Aug 12, 2019","L":"08/12/2019","MM-DD":"08-12"},"link":"Learning/1e8a589a019b","tags":["Nginx","PHP"],"categories":["Learning"],"updated":"2023-11-14T12:07:06.466Z","content":"<h2 id=\"一、环境说明\">一、环境说明<a title=\"#一、环境说明\" href=\"#一、环境说明\"></a></h2>\n<ul>\n<li>Linux：阿里云轻量应用服务器Ubuntu16.04</li>\n<li>Nginx：1.10.3</li>\n<li>MySQL：5.7.27</li>\n<li>PHP： 7.2.21</li>\n</ul>\n<span id=\"more\"></span>\n<h2 id=\"二、写前吐槽\">二、写前吐槽<a title=\"#二、写前吐槽\" href=\"#二、写前吐槽\"></a></h2>\n<p>  回想上次完全自己搭环境，还是大一的时候，啥也不会，linux基础命令都不会，买了个学生机，安装网上方法，lnmp搭建了三天，期间出问题不知重置了多少次服务器。后来我就直接用镜像市场的免费镜像了。<br>\n  这次，因为项目需要，一不小心买了台阿里云轻量应用服务器，买完服务器更换系统镜像才发现阿里云轻量应用服务器，除了安装官方提供的几个应用镜像wordpress、lnmp啥的，此外只能用纯系统镜像了，应用市场用不了。于是我就选择了Ubuntu16.04，决定自己再搭一次！！</p>\n<h2 id=\"三、安装步骤\">三、安装步骤<a title=\"#三、安装步骤\" href=\"#三、安装步骤\"></a></h2>\n<h3 id=\"3.1-购买服务器\">3.1 购买服务器<a title=\"#3.1-购买服务器\" href=\"#3.1-购买服务器\"></a></h3>\n<p>  购买过程就免了，选系统的时候一定选Linux的Ubuntu，本文是针对Linux的，至于Ubuntu版本，没什么要求，可以和我选一样的，也可以选更高的19版本，低版本也是可以的。</p>\n<h3 id=\"3.2-下载连接工具putty\">3.2 下载连接工具Putty<a title=\"#3.2-下载连接工具putty\" href=\"#3.2-下载连接工具putty\"></a></h3>\n<p><a href=\"https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html\" target=\"_blank\">Putty完整下载页</a><br>\n<a href=\"https://the.earth.li/~sgtatham/putty/latest/w64/putty.exe\" target=\"_blank\">推荐Putty.exe</a> 不要1M的大小，也不用安装。下载后直接运行，输入你服务器的公网IP地址直接连接。</p>\n<h3 id=\"3.3-使用root用户\">3.3 使用root用户<a title=\"#3.3-使用root用户\" href=\"#3.3-使用root用户\"></a></h3>\n<p>  如果不是root用户，建议切换的root用户下进行安装。现在服务器上也没有什么项目，一片空白，用root用户不怕出错，错了大不了重置系统重来嘛，反正现在也只是自己一个鼓捣。用root用户畅通无阻，方便！但是，今后对已有项目或者重要的服务器，慎用root用户，用普通用户操作，需要权限是再确认一下就Ok了。</p>\n<ul>\n<li>切换用户命令</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su root</span><br></pre></td></tr></table></figure>\n<h3 id=\"3.4-安装nginx\">3.4 安装nginx<a title=\"#3.4-安装nginx\" href=\"#3.4-安装nginx\"></a></h3>\n<ul>\n<li>拿到新机器时，先进行apt-get更新，不然会出错。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安装nginx</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install nginx</span><br></pre></td></tr></table></figure>\n<ul>\n<li>验证是否安装成功</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -v</span><br><span class=\"line\">nginx version: nginx/1.10.3 (Ubuntu)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3.5-安装mysql\">3.5 安装MySQL<a title=\"#3.5-安装mysql\" href=\"#3.5-安装mysql\"></a></h3>\n<ul>\n<li>安装MySQL</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install mysql-server</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安装过程中会输入两次账号为root的密码，第二次为确认密码。</li>\n<li>验证是否成功</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql --version</span><br><span class=\"line\">mysql  Ver 14.14 Distrib 5.7.27, <span class=\"keyword\">for</span> Linux (x86_64) using  EditLine wrapper</span><br></pre></td></tr></table></figure>\n<ul>\n<li>设置密码</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">use mysql;</span><br><span class=\"line\">update user <span class=\"built_in\">set</span> authentication_string=PASSWORD(<span class=\"string\">&quot;密码&quot;</span>) <span class=\"built_in\">where</span> user=<span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">update user <span class=\"built_in\">set</span> plugin=<span class=\"string\">&quot;mysql_native_password&quot;</span>;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\">quit;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>开启远程连接</li>\n</ul>\n<p>注意：远程连接需要开启默认端口，需要到控制台安全组开启3306端口</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>\n<p>注释掉<code>bind-address</code>:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#bind-address           = 127.0.0.1</span></span><br></pre></td></tr></table></figure>\n<p>然后重启mysql：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysql restart</span><br></pre></td></tr></table></figure>\n<h3 id=\"3.6-安装php\">3.6 安装PHP<a title=\"#3.6-安装php\" href=\"#3.6-安装php\"></a></h3>\n<ul>\n<li>正常执行install会找不到源，所以可以通过修改PPA源进行安装。第三条命令添加ppa源时，会让点击一次Enter键，点完若长时间不响应，可以Ctrl+C停止安装，再重新执行一次（我的经历）。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install python-software-properties</span><br><span class=\"line\">apt install software-properties-common</span><br><span class=\"line\">add-apt-repository ppa:ondrej/php</span><br><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install -y php7.2</span><br></pre></td></tr></table></figure>\n<ul>\n<li>验证安装是否成功</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php -v</span><br><span class=\"line\">PHP 7.2.21-1+ubuntu16.04.1+deb.sury.org+1 (cli) (built: Aug  7 2019 09:53:30) ( NTS )</span><br><span class=\"line\">Copyright (c) 1997-2018 The PHP Group</span><br><span class=\"line\">Zend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies</span><br><span class=\"line\">    with Zend OPcache v7.2.21-1+ubuntu16.04.1+deb.sury.org+1, Copyright (c) 1999-2018, by Zend Technologies</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安装完PHP后，还要安装一些基础扩展model</li>\n<li>查询所有扩展</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-cache search php7.2</span><br></pre></td></tr></table></figure>\n<ul>\n<li>扩展安装</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install php7.2-mysql php7.2-curl php7.2-json php7.2-cgi php7.2-xsl php7.2-bcmath php7.2-gmp php7.2-mbstring php7.2-zip php7.2-dom</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安装php-fpm，<a href=\"https://blog.csdn.net/qfire/article/details/78680717\" target=\"_blank\">为什么要用php-fpm</a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install php7.2-fpm</span><br></pre></td></tr></table></figure>\n<h3 id=\"3.7-nginx管理\">3.7 nginx管理<a title=\"#3.7-nginx管理\" href=\"#3.7-nginx管理\"></a></h3>\n<ul>\n<li>关闭nginx：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop nginx</span><br></pre></td></tr></table></figure>\n<ul>\n<li>开启nginx：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start nginx</span><br></pre></td></tr></table></figure>\n<ul>\n<li>重启nginx：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart nginx</span><br></pre></td></tr></table></figure>\n<ul>\n<li>如果您只是进行配置更改，Nginx通常可以重新加载，可以使用此命令：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl reload nginx</span><br></pre></td></tr></table></figure>\n<ul>\n<li>关闭 Nginx随系统启动</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">disable</span> nginx</span><br></pre></td></tr></table></figure>\n<ul>\n<li>开启 Nginx 随系统一起启动</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> nginx</span><br></pre></td></tr></table></figure>\n<h3 id=\"3.8-参考文章\">3.8 参考文章<a title=\"#3.8-参考文章\" href=\"#3.8-参考文章\"></a></h3>\n<p>  本文安装步骤是参考简书的一片文章，根据实际情况，稍有改变。<br>\n  尊重原创：<a href=\"https://www.jianshu.com/p/8f181bb3fd68\" target=\"_blank\">原文地址：沧海99</a></p>\n<h2 id=\"四、站点访问\">四、站点访问<a title=\"#四、站点访问\" href=\"#四、站点访问\"></a></h2>\n<p>  上面过程已经完成的环境搭建，现在可以在浏览器输入你服务器的公网IP地址访问了。你将会看到一片Apache2 Ubuntu Default Page的默认页面。此页面位于 <code>/var/www/html/index.html</code>, nginx配置文件位于 <code>/etc/nginx/sites-enabled/default</code>。至于如何配置nginx站点，可自行百度一下。</p>\n","prev":{"title":"Nginx站点配置","link":"Learning/a6fb2798339e"},"next":{"title":"JavaScript-axios","link":"Learning/3802578f2aa7"},"plink":"https://blog.jschef.com/Learning/1e8a589a019b/","toc":[{"id":"一、环境说明","title":"一、环境说明","index":"1"},{"id":"二、写前吐槽","title":"二、写前吐槽","index":"2"},{"id":"三、安装步骤","title":"三、安装步骤","index":"3","children":[{"id":"3.1-购买服务器","title":"3.1 购买服务器","index":"3.1"},{"id":"3.2-下载连接工具putty","title":"3.2 下载连接工具Putty","index":"3.2"},{"id":"3.3-使用root用户","title":"3.3 使用root用户","index":"3.3"},{"id":"3.4-安装nginx","title":"3.4 安装nginx","index":"3.4"},{"id":"3.5-安装mysql","title":"3.5 安装MySQL","index":"3.5"},{"id":"3.6-安装php","title":"3.6 安装PHP","index":"3.6"},{"id":"3.7-nginx管理","title":"3.7 nginx管理","index":"3.7"},{"id":"3.8-参考文章","title":"3.8 参考文章","index":"3.8"}]},{"id":"四、站点访问","title":"四、站点访问","index":"4"}],"reward":true,"copyright":{"author":"Chef Wu","link":"<a href=\"https://blog.jschef.com/Learning/1e8a589a019b/\" title=\"Ubuntu 16.04搭建lnmp环境\">https://blog.jschef.com/Learning/1e8a589a019b/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"August 12, 2019"}}