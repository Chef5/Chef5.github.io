{"title":"Vue学习-组件","date":"2019-07-24T09:30:00.000Z","date_formatted":{"ll":"Jul 24, 2019","L":"07/24/2019","MM-DD":"07-24"},"link":"Learning/ba1793c0983f","tags":["JavaScript","Vue","组件"],"categories":["Learning"],"updated":"2023-11-14T12:07:06.466Z","content":"<h2 id=\"1、组件注册\">1、组件注册<a title=\"#1、组件注册\" href=\"#1、组件注册\"></a></h2>\n<p>全局注册：Vue.component(‘component-name’, { /* … */ })，使用时直接使用。</p>\n<p>局部注册：var ComponentA = { /* … */ }，使用前现在components里声明。</p>\n<p>单文件组件：使用import ComponentA from ‘./ComponentA’，再在components里声明。</p>\n<h2 id=\"2、prop声明\">2、prop声明<a title=\"#2、prop声明\" href=\"#2、prop声明\"></a></h2>\n<p>命名和定义：根据vue代码规范B级建议，prop应该使用驼峰写法，且最好给prop说明数据类型。</p>\n<h2 id=\"3、父子组件间传值\">3、父子组件间传值<a title=\"#3、父子组件间传值\" href=\"#3、父子组件间传值\"></a></h2>\n<p>父-&gt;子：用prop</p>\n<p>子-&gt;父：在methods内使用this.$emit(event, value)事件触发传出</p>\n<h2 id=\"4、自定义事件\">4、自定义事件<a title=\"#4、自定义事件\" href=\"#4、自定义事件\"></a></h2>\n<p>事件名：this.$emit(‘kebab-case’)</p>\n<p>自定义v-model：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(<span class=\"string\">&#x27;base-checkbox&#x27;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">model</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">prop</span>: <span class=\"string\">&#x27;checked&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">event</span>: <span class=\"string\">&#x27;change&#x27;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">checked</span>: <span class=\"title class_\">Boolean</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    &lt;input</span></span><br><span class=\"line\"><span class=\"string\">      type=&quot;checkbox&quot;</span></span><br><span class=\"line\"><span class=\"string\">      v-bind:checked=&quot;checked&quot;</span></span><br><span class=\"line\"><span class=\"string\">      v-on:change=&quot;$emit(&#x27;change&#x27;, $event.target.checked)&quot;</span></span><br><span class=\"line\"><span class=\"string\">    &gt;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">base-checkbox</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;lovingVue&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">base-checkbox</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"5、在组件上使用原生事件\">5、在组件上使用原生事件<a title=\"#5、在组件上使用原生事件\" href=\"#5、在组件上使用原生事件\"></a></h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v-<span class=\"attr\">on</span>:click.<span class=\"property\">native</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"6、组件实践\">6、组件实践<a title=\"#6、组件实践\" href=\"#6、组件实践\"></a></h2>\n<p>根据组件学习，完成了一个组件：添加标签</p>\n<p>组件作用：给一个事物添加标签</p>\n<p>组件使用：在输入框输入内容（限制长度4字符），回车或按钮添加；单击关闭图标删除一个，双击标签同样也可以删除。</p>\n<p><img src=\"../images/20200328161510.png\" alt=\"image\" class=\"φbs\"></p>\n<div class=\"φbt\"><div class=\"φbv\"><table><thead>\n<tr>\n<th><strong>属性</strong></th>\n<th><strong>类型</strong></th>\n<th><strong>默认值</strong></th>\n<th><strong>作用</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>closeIcon</strong></td>\n<td>Boolean</td>\n<td></td>\n<td>标签显示删除图标，不加不显示</td>\n</tr>\n<tr>\n<td><strong>initList</strong></td>\n<td>Array</td>\n<td></td>\n<td>初始化显示标签</td>\n</tr>\n<tr>\n<td><strong>color</strong></td>\n<td>String</td>\n<td>blue</td>\n<td>标签颜色，可选red、green、blue</td>\n</tr>\n<tr>\n<td><strong>max</strong></td>\n<td>Number</td>\n<td>5</td>\n<td>标签个数限制</td>\n</tr>\n</tbody>\n</table></div></div><div class=\"φbt\"><div class=\"φbv\"><table><thead>\n<tr>\n<th><strong>事件</strong></th>\n<th><strong>返回值</strong></th>\n<th><strong>作用</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>on-change</strong></td>\n<td>Array</td>\n<td>返回当前标签数组</td>\n</tr>\n</tbody>\n</table></div></div><p>导入步骤：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//导入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">SettingTags</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../components/SettingTags.vue&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//示例中引用，这里简化了</span></span><br><span class=\"line\"><span class=\"attr\">components</span>: &#123; <span class=\"title class_\">SettingTags</span> &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">setting-tags</span> <span class=\"attr\">close-icon</span> @<span class=\"attr\">on-changed</span>=<span class=\"string\">&quot;getarr&quot;</span> <span class=\"attr\">color</span>=<span class=\"string\">&quot;red&quot;</span> <span class=\"attr\">:initList</span>=<span class=\"string\">&quot;list&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">setting-tags</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>源码：SettingTags.vue</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div class=&quot;container&quot;&gt;</span><br><span class=\"line\">    &lt;input class=&quot;input&quot; type=&quot;text&quot; maxlength=&quot;4&quot;  placeholder=&quot;添加标签&quot; v-model=&quot;val&quot; @keyup.enter=&quot;handEnterClick()&quot; /&gt;</span><br><span class=\"line\">    &lt;Button class=&quot;btn-add&quot; type=&quot;primary&quot; @click=&quot;handEnterClick()&quot; shape=&quot;circle&quot; icon=&quot;md-return-left&quot;&gt;&lt;/Button&gt;</span><br><span class=\"line\">    &lt;br&gt;</span><br><span class=\"line\">    &lt;div class=&quot;tags&quot;&gt;</span><br><span class=\"line\">      &lt;div class=&quot;tag-content&quot; @dblclick=&quot;handDeleteTag(index)&quot; v-for=&quot;(item,index) of lists&quot; :key=&quot;index&quot; &gt;</span><br><span class=\"line\">        &lt;div :class=&quot;[&#x27;tag&#x27;,color]&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">        &lt;Icon type=&quot;md-close&quot; v-if=&quot;closeIcon&quot; @click=&quot;handDeleteTag(index)&quot;/&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  name: &#x27;SettingTags&#x27;,</span><br><span class=\"line\">  props:&#123;</span><br><span class=\"line\">    color: &#123;</span><br><span class=\"line\">      type: String,</span><br><span class=\"line\">      default: &#x27;blue&#x27;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    closeIcon: Boolean,</span><br><span class=\"line\">    initList: Array,</span><br><span class=\"line\">    max: &#123;</span><br><span class=\"line\">      type: Number,</span><br><span class=\"line\">      default: 5</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  data () &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      lists: this.initList,</span><br><span class=\"line\">      val: &#x27;&#x27;,</span><br><span class=\"line\">      colors: [&#x27;red&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    handEnterClick () &#123;</span><br><span class=\"line\">      if(this.lists.length == this.max)&#123;</span><br><span class=\"line\">        this.$Message.error(&quot;超过标签个数限制&quot;)</span><br><span class=\"line\">        return</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      this.val === &#x27;&#x27; ? &#x27;&#x27; : this.lists.push(this.val)</span><br><span class=\"line\">      this.val = &#x27;&#x27;</span><br><span class=\"line\">      this.$emit(&#x27;on-changed&#x27;, this.lists)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handDeleteTag (index) &#123;</span><br><span class=\"line\">      this.lists.splice(index, 1)</span><br><span class=\"line\">      this.$emit(&#x27;on-changed&#x27;, this.lists)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style scoped&gt;</span><br><span class=\"line\">  .container&#123;</span><br><span class=\"line\">    margin: 8px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .input&#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    display: inline-block;</span><br><span class=\"line\">    height: 28px;</span><br><span class=\"line\">    line-height: 1.5;</span><br><span class=\"line\">    padding: 2px 7px;</span><br><span class=\"line\">    font-size: 12px;</span><br><span class=\"line\">    border: 1px solid #dcdee2;</span><br><span class=\"line\">    border-radius: 4px;</span><br><span class=\"line\">    color: #515a6e;</span><br><span class=\"line\">    background-color: #fff;</span><br><span class=\"line\">    background-image: none;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    cursor: text;</span><br><span class=\"line\">    transition: border .2s ease-in-out,background .2s ease-in-out,box-shadow .2s ease-in-out;</span><br><span class=\"line\">    outline: #57a3f3;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .input:focus&#123;</span><br><span class=\"line\">    border-color: #57a3f3;</span><br><span class=\"line\">    box-shadow: #57a3f3 0px 0px 4px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .btn-add&#123;</span><br><span class=\"line\">    margin-left: 5px;</span><br><span class=\"line\">    height: 26px !important;</span><br><span class=\"line\">    width: 26px !important;</span><br><span class=\"line\">    margin-bottom: 3px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .tags&#123;</span><br><span class=\"line\">    color: #515a6e;</span><br><span class=\"line\">    display: flex;</span><br><span class=\"line\">    margin-top: 2px;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    flex-wrap: wrap;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .tag-content&#123;</span><br><span class=\"line\">    display: flex;</span><br><span class=\"line\">    margin: 4px 2px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .tag&#123;</span><br><span class=\"line\">    width: fit-content;</span><br><span class=\"line\">    padding: 2px;</span><br><span class=\"line\">    font-size: 12px;</span><br><span class=\"line\">    line-height: 14px;</span><br><span class=\"line\">    border-radius: 3px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .green&#123;</span><br><span class=\"line\">    border: 1px solid #b7eb8f;</span><br><span class=\"line\">    background: #f6ffed;</span><br><span class=\"line\">    color: #52c41a!important;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .blue&#123;</span><br><span class=\"line\">    border: 1px solid #91d5ff;</span><br><span class=\"line\">    background: #e6f7ff;</span><br><span class=\"line\">    color: #1890ff!important;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  .red&#123;</span><br><span class=\"line\">    border: 1px solid #ffa39e;</span><br><span class=\"line\">    background: #fff1f0;</span><br><span class=\"line\">    color: #f5222d!important;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  i&#123;</span><br><span class=\"line\">    margin-top: -5px;</span><br><span class=\"line\">    display: inline-block;</span><br><span class=\"line\">    height: fit-content;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n","prev":{"title":"JavaScript-axios","link":"Learning/3802578f2aa7"},"next":{"title":"Vue学习-代码规范","link":"Learning/fb3bb04d6643"},"plink":"https://blog.jschef.com/Learning/ba1793c0983f/","toc":[{"id":"1、组件注册","title":"1、组件注册","index":"1"},{"id":"2、prop声明","title":"2、prop声明","index":"2"},{"id":"3、父子组件间传值","title":"3、父子组件间传值","index":"3"},{"id":"4、自定义事件","title":"4、自定义事件","index":"4"},{"id":"5、在组件上使用原生事件","title":"5、在组件上使用原生事件","index":"5"},{"id":"6、组件实践","title":"6、组件实践","index":"6"}],"reward":true,"copyright":{"author":"Chef Wu","link":"<a href=\"https://blog.jschef.com/Learning/ba1793c0983f/\" title=\"Vue学习-组件\">https://blog.jschef.com/Learning/ba1793c0983f/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"July 24, 2019"}}